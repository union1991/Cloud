# Day 3.

## 목차
 
### 3. TCP/IP
 
> #### 3.5 사용자 데이터그램 프로토콜
> #### 3.6 전송 제어 프로토콜

### 4. 네트워크 인프라

> #### 4.1 장비

### 5. 서버스

> #### 5.1 서버와 클라이언트


------------
 
## 3. TCP/IP
 
국제표준기준인 OSI 7 Layer를 간략화 시킨 실질적인 모델이다.

 ------------
  
#### 3.5 사용자 데이터그램 프로토콜(User Datagram Protocol, UDP)

**사용자 데이터그램 프로토콜(User Datagram Protocol, UDP)** 은 인터넷 프로토콜 스위트의 주요 프로토콜 가운데 하나이다.
 
* UDP Format
> * UDP Header는 총 8바이트(64비트)의 고정 Header 길이를 가지고 있음
> > * 1. 출발지 포트 주소 : 16비트
> > * 2. 도착지 포트 주소 : 16비트
> > * 3. Total Length : 16비트
> > * 4. Check Sum : 16비트

---

#### 3.6 전송 제어 프로토콜(Transmission Control Protocol, TCP)

**전송 제어 프로토콜(Transmission Control Protocol, TCP)** 은 인터넷 프로토콜 스위트(IP)의 핵심 프로토콜 중 하나로, IP와 함께 TCP/IP라는 명칭으로도 널리 불린다.

* TCP Format
> * TCP Header는 총 20바이트의 고정 Header 길이를 가짐
> * Flag Bits : **URG, ACK, PSH, RST, SYN, FIN**으로 TCP 세그먼트 전달과 관련되어 TCP 회선 및 데이터 관리 제어 기능을 하는 플래그 
>   + 데이터를 전송할 때 사용되는 유일한 플래그는 **PSH** 이다.

<img src="https://user-images.githubusercontent.com/56064985/81760649-c7a25800-9502-11ea-91d7-55585f97877e.png" width="90%"></img>
<br>

(그림 출처 :정보통신기술용어해설 사이트 http://www.ktword.co.kr/abbr_view.php?m_temp1=1889)

<br>

* 3 Way HandShake
> * TCP는 안정적이고 연결지향적인 트랜스포트 계층용 프로토콜로써 연결 세션 설정을 위해 3단계의 HandShaking 과정을 밟음

<img src="https://user-images.githubusercontent.com/56064985/81763097-5ca84f80-9509-11ea-86ea-f8d54f456816.png" width="50%"></img>
<br>

(그림 출처 :정보통신기술용어해설 사이트 http://www.ktword.co.kr/abbr_view.php?m_temp1=657&m_search=tcp+state)

<br>

---

## 4. 네트워크 인프라
 
 ------------
  
#### 4.1 장비

**사용자 데이터그램 프로토콜(User Datagram Protocol, UDP)** 은 인터넷 프로토콜 스위트의 주요 프로토콜 가운데 하나이다.
 
* 허브(HUB)
> * 연결된 컴퓨터와 네트워크 장비는 모두 상호 간에 통신할 수 있음
> * **비트** 전송
> * 연결된 모든 포트에 전기 신호를 송출
>   + 더미 허브 : 한번에 모든 포트에 전기 신호 송출
>   + 스위치 허브 : 한번에 한 포트씩 전기 신호 송출
>   + 속도는 스위치가 빠르지만, 안전하지 않은 것은 같음
> * 1계층에서 사용되며 Collision을 염두해두고 만든 것이 아님(**충돌 다수 발생**)

* 스위치(Switch)
> * 2계층 장비로 MAC 주소에 해당하는 장비의 포트 번호가 기록된 **MAC 주소 테이블**을 보고 목적지에게만 **Frame** 전송
> * 토폴로지를 구성하기 위한 장비
> * 각각의 포트가 하나의 Collision Domain에 있음
>   + **Collision이 일어나지 않음**
> * 웜이 있는 특정 스위치를 색출하는 방법은 스위치 스팸 포트에 연결하여 내부 모든 포트 정보를 확인하며 찾아냄

* 라우터(Router)
> * 3계층에서 사용되는 장비 최단거리를 찾을 때 사용됨
> * **패킷**을 전송
> * 세션 계층의 QOS 기능을 지원함
> * 주소가 변한 것을 알려줌(ICMP Redirect) 
> * 라우팅테이블 연결된 네트워크 정보를 가지고 있어야 함

---

## 5. 서비스
 
 ------------
  
#### 5.1 서버와 클라이언트

서버란 컴퓨터 네트워크에서 통신 요청에 대해 응답을 하는 주체이고, 클라이언트란 컴퓨터 네트워크에서 통신을 먼저 시작하는 주체이다.
 
* 서버 특징
> * 클라이언트의 요청을 처리하기 위해 항상 대기 상태로 준비하고 있어야 함
> * 클라이언트로부터 요청을 받으면 최대한 즉시 처리해야 함
> * 여러 클라이언트가 동시에 요청하는 경우에도 안정적으로 처리해야 함


* WireShark Pcap 로그
> * pcap(packet capture, 패킷 캡처)은 컴퓨터 네트워크 관리 분야에서 네트워크 트래픽 포착용 API를 구성하고 있음
> * WireShark 에서 수집한 정보는 다음과 같이 저장 가능함


<img src="https://user-images.githubusercontent.com/56064985/81772707-81a8bc80-9521-11ea-954e-affd30c32a5a.png" width="90%"></img>

<br>

> * 직접 수집할 수 없는 정보는 다음 사이트에서 받아올 수 있음 https://wiki.wireshark.org/SampleCaptures
---

#### 5.2 동적호스트 구성 프로토콜(Dynamic Host Configuration Protocol, DHCP)

DHCP란, 호스트 구성 프로토콜(Dynamic Host Configuration Protocol, DHCP)은 호스트 IP 구성 관리를 단순화하는 IP 표준이다.
 
* DHCP를 사용하는 이유
> * 클라이언트 네트워크 설정을 빠르게 전달하는데 유용하다. 클라이언트 시스템을 설정할 때, 관리자는 DHCP를 선택하면 IP주소, 넷마스크, 게이트웨이, DNS 서버를 입력할 필요가 없고 클라이언트는 이러한 정보를 DHCP 서버로부터 받는다.

* DHCP 동작 과정
> * DHCP 서버가 동작하면 클라이언트들은 그 서버에 연결하여 유일한 IP 주소를 제공받음
>   + IP 임대 요청
>   + IP 임대 제공
>   + IP 임대 선택
>   + IP 임대 확인 응답


---


#### 5.3 도메인 네임 서비스(Domain Name Service, DNS)

DNS란, 숫자로 구성된 네트워크 주소인 IP 주소를 사람이 이해하기 쉬운 명칭인 도메인 이름으로 상호 매칭시켜주는 시스템 

* DNS 계층 구조
> * 가장 상위 개체는 '.'(ROOT)
> * 두 번째 개체는 국가와 조직체의 특성
> * 보통 맨 앞은 자신의 DNS 서버에서 지정해놓은 www, ftp와 같은 특정 서버의 이름이 옴
> * Fully Qualified Domain Name(FQDN) : 완성된 주소
> * cache nameserver(회사 내부에서 주로 켜놓음), master, slave로 구성됨
>    * cache nameservice는 학습된 서버의 경우, 외부로 DNS를 찾는 것이 아니라 내부에 저장해놓는 기능으로 볼 수 있음

* DNS 실습
> * 명령어 창에 **'dig @192.168.0.175 yahoo.co.kr +trace |more'** 을 입력하여 DNS 서비스를 지원하는 서버를 확인할 수 있음
>   + 순환 질의 : 질의된 도메인에 대해 즉각 응답하거나, 다른 서버에게 질의한 결과로 응답하거나,찾고 있는 정보가 없다는 에러 메시지를 보내줌
>   + 재귀 질의 : 질의된 도메인에 대해 응답하거나, 아니면 이 작업을 할 수 있는 다른 DNS 서버에 클라이언트를 연결 시켜 주는 작업


<img src="https://user-images.githubusercontent.com/56064985/81776966-d43aa680-952a-11ea-9ed7-aff9c8832d13.png" width="90%"></img>

<br>

---

#### 5.4 하이퍼본문 전송 규약(HyperText Transfer Protocol, HTTP)


WWW 상에서 정보를 주고받을 수 있는 프로토콜이다. 주로 HTML 문서를 주고받는 데에 쓰인다. TCP와 UDP를 사용하며, 80번 포트를 사용한다. Version은 0.9, 1.0, 1.1이 있다.

* HTTP 상태 코드
> * 100 대 : 정보 전송
> * 200 대 : 연결 성공
> * 300 대 : 리다이렉션
> * 400 대 : 클라이언트 요청 에러
> * 500 대 : 서버 에러

* HTTP 메소드
> * Get : 요청받은 URI의 정보를 검색하여 응답(최대 255자), 주로 중요하지 않는 정보를 보낼 때 사용됨
> * Post : 요청된 자원을 생성하고 새로 작성된 소스인 경우 HTTP헤더 항목 Location : URI주소를 포함하여 응답. content-length를 이용해서 HTTP Body에 공간을 확보 후 데이터를 담아서 전송
>    + 외에는 보안이 취약해 쓰지 않음
>    + 애초 HTTP는 보안상 안전하지 않음(평문 전송되기 때문)


<img src="https://user-images.githubusercontent.com/56064985/81782294-93478f80-9534-11ea-974e-416a82385888.png" width="90%"></img>

<br>


* HTTP Strict Transport Security, HSTS
> * HSTS는 프로토콜 다운 그레이드 공격 및 쿠키 하이재킹과 같은 중간자 공격으로부터 웹 사이트를 보호하는 데 도움이되는 웹 보안 정책 메커니즘
> * HTTP는 TCP 80번 포트를 사용하지만 보안상 안전하지 않아 443포트(HTTPS)에 SSL/TLS 방식을 적용. 그러나 HTTPS는 80번 포트에서 443 포트로 간 정보를 80번 포트 만들수만 있다면 얼마든지 평문으로 볼수있음. 이러한 취약점을 공격하는 기법
>   + 현재 구글에서 HSTS 공격을 막는 방식을 제공하고 있음
>   + HTTP에서 HTTPS로 가면 느려질 것이라고 예상했지만, 압축된 기법을 사용하여 HTTPS가 보다 빠름
>   + 구글에서 HTTP 사이트는 위험하지 않다는 경고를 띄우면서 많은 사이트들이 HTTPS 방식으로 전향함


---


#### 5.5 Telecommunication Network Protocol, Telnet



Telnet은 인터넷을 이용하여 내 컴퓨터에서 상대방의 컴퓨터를 원격으로 제어할 수 있도록 해주는 명령인 클라이언트/서버 프로그램이다.


* Telnet 설치 및 구동
> * 설치 : **'sudo apt-get install telnetd -y'**


<img src="https://user-images.githubusercontent.com/56064985/81788131-02c17d00-953d-11ea-9935-65d40a74a769.png" width="90%"></img>


> * 구동 : **'sudo systemctl enable inetd'**, **'sudo systemctl start inetd'**







--------------
## 금일 교육의 Key Point
 
#### 

