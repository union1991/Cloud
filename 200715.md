Day 00.

# DevOps를 위한 Kubernetes 컨테이너 클러스터 심화 과정


## 목차


## 1. 컨테이너와 쿠버네티스 소개 

> ### 1.1 쿠버네티스 소개

## 2. 쿠버네티스 기본 

> ### 2.1 구성요소 및 API
------------
 
## 1. 컨테이너와 쿠버네티스 소개 


### 1.1 쿠버네티스 소개


#### 쿠버네티스란
* 쿠버네티스는 조타수나 파일럿을 뜻하는 그리스어에서 유래했으며, 소프트웨어와 인프라를 전 세계에 확장할 수 있는 훨씬 더 진보한 방법으로 개발자와 관리자가 수천 개의 애플리케이션과 서비스를 관리하는데 도움을 준다.


#### 쿠버네티스가 제공하는 기능
* 컨테이너 플랫폼
* 마이크로 서비스 플랫폼
* 이식성 있는 클라우드 플랫폼


#### 쿠버네티스가 제공하지 않는 기능
* 쿠버네티스는 PaaS의 분류에 속하지만, 일반적인 Paas의 모든 개념을 포함하지 않음
* CI/CD 파이프 라인
> * 지속적 통합, 지속적 배포를 제공하지 않음
> * 소스코드 배포 및 애플리케이션을 빌드하지 않음
* 애플리케이션 레벨의 서비스
> * 미들웨어, 빅데이터, 데이터베이스, 캐시, 클러스터 스토리지 등 애플리케이션 레벨의 서비스는 제공하지 않음
* 로깅, 모니터링, 경고 솔루션
> * 개념을 위한 통합, 메트릭 수집 및 노출 메커니즘은 제공
> * 그러나 쿠버네티스는 필요한 경우 PaaS로 제공되어야 하는 여러 기능을 선택적으로 쿠버네티스 위에 구성할 수 있음


---

## 2. 쿠버네티스 기본 


### 2.1 구성요소 및 API


#### 쿠버네티스 구성 요소
* 마스터
> * API 서버(Kube-apiserver)
> * etcd
> * 쿠버네티스 컨트롤러 관리자
> * 클라우드 컨트롤러 관리자


* 노드
> * Kubelet
> * 프록시
> * 컨테이너 런타임


```
apiVersion: v1      // 코어 버전
kind: Pod     // pods    po    true    Pod
metadata:     // 리소스의 이름 등을 기입
  name: myweb-pod
  labels:
    app: myweb
    type: frontend
spec:        //
  containers:
  - name: nginx-container
    image: nginx
```

```
$ kubectl api-versions
$ kubectl api-resources
$ kubectl explain pod
```
* master 서버
> * index.js
```
# vi index.js
const http = require('http')
const os = require('os')
const ip = require('ip')
const dns = require('dns')
console.log(Date());
console.log("...start My Node.js Application...");
var handler = function(request, response) {
        console.log(Date());
        console.log("Received Request From " + request.connection.remoteAddress);
        response.writeHead(200);
        response.write("Message: " + process.argv[2] + "\n");
        response.write("Hostname: " + os.hostname() + "\n");
        response.write("Platform: " + os.platform() + "\n");
        response.write("Uptime: " + os.uptime()+ "\n");
        response.write("IP: " + ip.address() + "\n");
        response.write("DNS: " + dns.getServers()+ "\n");
        response.end();
};
var www = http.createServer(handler);
www.listen(8080);

```


> * Dockerfile 
```
# vi Dpckerfile
FROM node:slim
WORKDIR /usr/src/app
COPY index.js .
RUN npm install ip
ENTRYPOINT ["node", "index.js"]
CMD ["HELLO World!"]
EXPOSE 8080/tcp
```

> * 
```
# docker image build --network host -t myweb .
# docker container run --name test -d -p 8080:8080 myweb
# curl http://localhost:8080
Message: HELLO World!
Hostname: a03cbf9df6ba
Platform: linux
Uptime: 21007
IP: 172.17.0.3

```


> * Docker Hub에 업로드
```
# docker login
# docker image tag myweb:latest union1991/myweb:latest
# docker image push union1991/myweb:latest
```















