Day 13.

## 목차
 
### 8. 리눅스 핵심 운영 가이드

> #### 8.5 NFS 스토리지


------------
 
 
## 8. 리눅스 핵심 운영 가이드
 
 
최신 리눅스 시스템의 핵심 기술과 원리를 배우며 서버 관리자, 시스템 엔지니어, 클라우드 관리자, 개발자, DBA, 데브옵스 등 다양한 IT 관리자 및 개발자들에게 기본이 되는 기술을 습득한다.



 ------------

 
 #### 8.5 NFS 스토리지

* 리눅스 서버에서 제공하는 저장공간인 공유 시스템을 말한다.
> * 클라이언트는 서버에서 제공하는 공유 디렉토리에 접근
> * NAS도 약간 비슷한 방식

* NFSv4


server 구성
* 패키지 설치
```
# yum install -y nfs-utils.x86 rpcbind.x86_64
# mkdir /nfs
# chnod 777 /nfs
# vi /etc/exports //nfs 설정
/nfs  192.168.122.0/24(rw, sync,sec=sys) // sec = none, sys, krb5, krb5i, krb5p


:wq!
```
* 방화벽 설정 
```
# firewall-cmd --permanent --add-service=nfs
# firewall-cmd --permanent --add-service=rpc-bind
# firewall-cmd --permanent --add-service=mountd
# firewall-cmd --reload
```

* 서비스 시작
```
# systemctl start rpcbind
# systemctl start nfs-server
# systemctl start rpc-statd
# systemctl enable rpcbind
# systemctl enable nfs-server
# systemctl enable rpc-statd

# exportfs -v //실행
```
client 구성
* 패키지 설치 및 mount
```

# yum install rpcbind
# yum install nfs-utils
# mkdir /mnt/nfs
# mount -o rw,sync,sec=sys 192.168.122.200:/nfs /mnt/nfs

```

주소
DNS -> * .nobreak.co.kr
client1.nobreak.co.kr
client2.nobreak.co.kr
client[1,2].nobreak.co.kr
www.nobreak.co.kr
192.168.0.5(ro) 192.168.0.10(rw)


* 자동마운트


자동 마운트 설정 저장
```
# vi /etc/fstab

# /etc/fstab
# Created by anaconda on Fri May 22 14:34:12 2020
#
# Accessible filesystems, by reference, are maintained under '/dev/disk'
# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info
#
/dev/mapper/centos-root /                       xfs     defaults        0 0
UUID=923745de-1bfd-4c7e-89a1-5895651ee0ec /boot                   xfs     defaults        0 0
/dev/mapper/centos-swap swap                    swap    defaults        0 0
192.168.122.200:/nfs    /mnt/nfs        nfs     defaults,sec=sys 0 0


:wq!
```

마운트 내용 확인
```
# mount -a
# df -Th
Filesystem              Type      Size  Used Avail Use% Mounted on
devtmpfs                devtmpfs  484M     0  484M   0% /dev
tmpfs                   tmpfs     496M  6.8M  489M   2% /run
tmpfs                   tmpfs     496M     0  496M   0% /sys/fs/cgroup
/dev/mapper/centos-root xfs        17G  1.4G   16G   8% /
/dev/sda1               xfs      1014M  181M  834M  18% /boot
192.168.122.200:/nfs    nfs4       17G  1.7G   16G  10% /mnt/nfs
# reboot 
'''




